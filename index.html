<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>Govhoo — Expiring Federal Contracts</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
<style>
:root {
  /* Light Mode (E-Ink) */
  --paper: #fafaf8;
  --ink: #1a1a1a;
  --light-ink: #666666;
  --lighter-ink: #999999;
  --border: #e0e0de;
  --accent-line: #d0d0ce;
  --subtle-bg: #f4f4f2;
  --hover-bg: #eeeeec;
  
  /* E-Ink Colors (soft, visually pleasing pastels) */
  --eink-coral: #E8B4B8;
  --eink-peach: #F5D5B0;
  --eink-sage: #C8D5B9;
  --eink-lavender: #D4C8E0;
  --eink-mist: #D8D8D8;
}

[data-theme="dark"] {
  /* Dark Mode (Inverted E-Ink) */
  --paper: #1a1a1a;
  --ink: #e8e8e8;
  --light-ink: #a0a0a0;
  --lighter-ink: #707070;
  --border: #2a2a2a;
  --accent-line: #353535;
  --subtle-bg: #202020;
  --hover-bg: #252525;
  
  /* E-Ink Colors (darker versions for dark mode) */
  --eink-coral: #5A3C3E;
  --eink-peach: #5A4A3A;
  --eink-sage: #3E4A38;
  --eink-lavender: #4A3E52;
  --eink-mist: #3A3A3A;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
  background: var(--paper);
  color: var(--ink);
  line-height: 1.6;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}

/* ===== THEME TOGGLE ===== */
.theme-toggle {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  width: 40px;
  height: 40px;
  background: var(--ink);
  color: var(--paper);
  border: 1px solid var(--border);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 1000;
  transition: all 0.2s ease;
  font-size: 1rem;
}

.theme-toggle:hover {
  transform: scale(1.1);
}

.theme-toggle:active {
  transform: scale(0.95);
}

/* ===== HERO ===== */
.hero-section {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 4rem 1.5rem 2rem;
}

.hero-section.hidden {
  display: none;
}

.hero-logo-text {
  font-size: clamp(2rem, 10vw, 4rem);
  font-weight: 600;
  letter-spacing: -0.02em;
  margin-bottom: 0.5rem;
  cursor: pointer;
  transition: opacity 0.2s ease;
  user-select: none;
}

.hero-logo-text:active {
  opacity: 0.5;
}

.hero-subtitle {
  font-size: clamp(0.875rem, 3vw, 1rem);
  font-weight: 400;
  color: var(--light-ink);
  margin-bottom: 3rem;
  max-width: 90%;
  line-height: 1.5;
  letter-spacing: 0.01em;
}

.search-container {
  width: 100%;
  max-width: 540px;
  padding: 0;
}

.form-input {
  width: 100%;
  background: var(--paper);
  border: none;
  border-bottom: 2px solid var(--ink);
  border-radius: 0;
  padding: 0.875rem 0;
  font-size: 1rem;
  color: var(--ink);
  font-family: inherit;
  margin-bottom: 2rem;
  transition: border-color 0.2s ease;
  font-weight: 400;
}

.form-input:focus {
  outline: none;
  border-bottom-color: var(--ink);
}

.form-input::placeholder {
  color: var(--lighter-ink);
  font-weight: 300;
}

.search-btn {
  width: 100%;
  background: var(--ink);
  color: var(--paper);
  border: none;
  border-radius: 0;
  padding: 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  font-family: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: opacity 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  touch-action: manipulation;
}

.search-btn:active:not(:disabled) {
  opacity: 0.7;
}

.search-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* ===== RESULTS ===== */
.results-section {
  display: none;
  min-height: 100vh;
  min-height: 100dvh;
}

.results-section.active {
  display: block;
}

.results-header {
  background: var(--paper);
  border-bottom: 1px solid var(--border);
  padding: 1rem;
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-brand {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--accent-line);
}

.header-brand-text {
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: -0.01em;
  cursor: pointer;
  user-select: none;
}

.header-brand-text:active {
  opacity: 0.5;
}

.header-actions-desktop {
  display: none;
  gap: 0.75rem;
}

.action-btn-desktop {
  background: transparent;
  color: var(--ink);
  border: 1px solid var(--border);
  border-radius: 0;
  padding: 0.5rem 1rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  font-family: inherit;
  display: flex;
  align-items: center;
  gap: 0.375rem;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.action-btn-desktop:hover {
  background: var(--ink);
  color: var(--paper);
  border-color: var(--ink);
}

.header-search-row {
  display: flex;
  gap: 0.5rem;
  align-items: stretch;
}

.header-search-input {
  flex: 1;
  background: var(--paper);
  border: none;
  border-bottom: 1px solid var(--border);
  border-radius: 0;
  padding: 0.625rem 0;
  font-size: 0.875rem;
  color: var(--ink);
  font-family: inherit;
  font-weight: 400;
}

.header-search-input:focus {
  outline: none;
  border-bottom-color: var(--ink);
}

.header-search-btn {
  background: var(--ink);
  color: var(--paper);
  border: none;
  border-radius: 0;
  padding: 0.625rem 1.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  font-family: inherit;
  white-space: nowrap;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  transition: opacity 0.2s ease;
  touch-action: manipulation;
}

.header-search-btn:active {
  opacity: 0.7;
}

/* ===== SUMMARY ===== */
.summary-bar {
  padding: 1rem;
  background: var(--subtle-bg);
  border-bottom: 1px solid var(--border);
}

.summary-text {
  font-size: 0.8125rem;
  line-height: 1.6;
  color: var(--light-ink);
  font-weight: 400;
}

.summary-text strong {
  color: var(--ink);
  font-weight: 500;
}

/* ===== FILTERS ===== */
.filters-bar {
  padding: 1rem;
  background: var(--paper);
  border-bottom: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.filter-input,
.filter-select {
  width: 100%;
  background: var(--paper);
  border: none;
  border-bottom: 1px solid var(--border);
  border-radius: 0;
  padding: 0.625rem 0;
  font-size: 0.8125rem;
  color: var(--ink);
  font-family: inherit;
  font-weight: 400;
}

.filter-input:focus,
.filter-select:focus {
  outline: none;
  border-bottom-color: var(--ink);
}

.filter-input::placeholder {
  color: var(--lighter-ink);
}

/* ===== TABLE / CARDS ===== */
.results-list {
  padding-bottom: 0;
}

.table-header {
  display: none !important;
}

.result-card {
  background: var(--paper);
  border-bottom: 1px solid var(--border);
  padding: 1.25rem 1rem;
  transition: background 0.2s ease;
  cursor: pointer;
  touch-action: manipulation;
}

.result-card:active {
  background: var(--hover-bg);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 0.875rem;
}

.priority-badge {
  display: inline-block;
  padding: 0.25rem 0.625rem;
  border: 1px solid transparent;
  border-radius: 0;
  font-size: 0.625rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  white-space: nowrap;
  flex-shrink: 0;
}

.priority-urgent {
  background: var(--eink-coral);
  color: var(--ink);
  border-color: var(--eink-coral);
}

.priority-high {
  background: var(--eink-peach);
  color: var(--ink);
  border-color: var(--eink-peach);
}

.priority-medium {
  background: var(--eink-sage);
  color: var(--ink);
  border-color: var(--eink-sage);
}

.priority-low {
  background: var(--eink-lavender);
  color: var(--ink);
  border-color: var(--eink-lavender);
}

.priority-expired {
  background: var(--eink-mist);
  color: var(--light-ink);
  border-color: var(--eink-mist);
}

.contract-value {
  font-weight: 500;
  font-size: 1.125rem;
  color: var(--ink);
  text-align: right;
  flex-shrink: 0;
  letter-spacing: -0.01em;
}

.card-days {
  display: none;
}

.days-info {
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  flex-wrap: wrap;
}

.days-remaining {
  font-weight: 500;
  font-size: 0.875rem;
  color: var(--ink);
}

.days-urgent { color: var(--ink); font-weight: 600; }
.days-high { color: var(--ink); font-weight: 600; }
.days-medium { color: var(--ink); font-weight: 500; }
.days-low { color: var(--light-ink); }
.days-expired { color: var(--lighter-ink); }

.expiry-date {
  color: var(--lighter-ink);
  font-size: 0.75rem;
  font-weight: 400;
}

.vendor-info {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  margin-bottom: 0.625rem;
}

.vendor-avatar {
  display: none;
}

.vendor-name {
  font-weight: 500;
  font-size: 0.875rem;
  line-height: 1.4;
  color: var(--ink);
}

.agency-name {
  font-size: 0.8125rem;
  color: var(--light-ink);
  margin-bottom: 0.625rem;
  font-weight: 400;
}

.description-text {
  font-size: 0.8125rem;
  line-height: 1.5;
  color: var(--light-ink);
  margin-bottom: 0.75rem;
  font-weight: 400;
}

.view-link {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  color: var(--ink);
  font-size: 0.75rem;
  font-weight: 500;
  text-decoration: none;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid var(--ink);
  padding-bottom: 1px;
  transition: opacity 0.2s ease;
}

.view-link:active {
  opacity: 0.5;
}

/* ===== BOTTOM ACTIONS ===== */
.bottom-actions {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--paper);
  border-top: 1px solid var(--border);
  padding: 0.875rem 1rem;
  display: flex;
  gap: 0.625rem;
  z-index: 90;
}

.action-btn {
  flex: 1;
  background: transparent;
  color: var(--ink);
  border: 1px solid var(--border);
  border-radius: 0;
  padding: 0.75rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  font-family: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  touch-action: manipulation;
}

.action-btn:active {
  background: var(--ink);
  color: var(--paper);
}

/* ===== LOADING ===== */
.loading-state {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(250, 250, 248, 0.95);
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.loading-state.active {
  display: flex;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 2px solid var(--border);
  border-top: 2px solid var(--ink);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1.5rem;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.25rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.loading-subtext {
  color: var(--light-ink);
  font-size: 0.8125rem;
  font-weight: 400;
}

/* ===== EMPTY STATE ===== */
.empty-state {
  padding: 4rem 1.5rem;
  text-align: center;
}

.empty-icon {
  font-size: 3rem;
  color: var(--border);
  margin-bottom: 1rem;
}

.empty-text {
  font-size: 0.875rem;
  color: var(--light-ink);
  font-weight: 400;
}

/* ===== FOOTER ===== */
.footer {
  background: var(--paper);
  padding: 2rem 1rem 2rem;
  margin-top: 0;
}

.footer-grid {
  max-width: 1400px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1fr;
  gap: 2.5rem;
}

.footer-section {
  border-top: 1px solid var(--accent-line);
  padding-top: 1.5rem;
}

.footer-heading {
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--ink);
  margin-bottom: 1.25rem;
}

.footer-text {
  font-size: 0.875rem;
  line-height: 1.7;
  color: var(--light-ink);
  font-weight: 400;
  margin-bottom: 1rem;
}

.footer-list {
  list-style: none;
  margin-bottom: 1.5rem;
}

.footer-list li {
  font-size: 0.875rem;
  line-height: 1.8;
  color: var(--light-ink);
  padding-left: 1.25rem;
  position: relative;
  margin-bottom: 0.75rem;
}

.footer-list li::before {
  content: '—';
  position: absolute;
  left: 0;
  color: var(--lighter-ink);
}

.footer-emphasis {
  color: var(--ink);
  font-weight: 500;
}

.footer-cta {
  font-size: 0.875rem;
  color: var(--light-ink);
  margin-bottom: 1.25rem;
}

.footer-links {
  display: flex;
  gap: 1.25rem;
  flex-wrap: wrap;
}

.footer-link {
  font-size: 0.75rem;
  color: var(--ink);
  text-decoration: none;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid var(--ink);
  padding-bottom: 1px;
  transition: opacity 0.2s ease;
  font-weight: 500;
}

.footer-link:hover {
  opacity: 0.6;
}

.footer-bottom {
  max-width: 1400px;
  margin: 3rem auto 0;
  padding-top: 1.5rem;
  border-top: 1px solid var(--accent-line);
  text-align: center;
  font-size: 0.75rem;
  color: var(--lighter-ink);
  font-weight: 400;
}

@media (min-width: 768px) {
  .footer {
    padding: 4rem 2rem 2rem;
  }
  
  .footer-grid {
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
  }
}

@media (min-width: 1024px) {
  .footer-grid {
    grid-template-columns: 1.2fr 1fr 1fr;
  }
}

/* ===== DESKTOP ===== */
@media (min-width: 1024px) {
  .theme-toggle {
    bottom: 1.5rem;
    right: 1.5rem;
  }
  
  .results-header {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1.5rem 2rem;
    border-left: 1px solid var(--border);
    border-right: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
  }
  
  .header-brand {
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
  }
  
  .header-brand-text {
    font-size: 1.5rem;
  }
  
  .header-actions-desktop {
    display: flex;
  }
  
  .summary-bar {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1.5rem 2rem;
    border-left: 1px solid var(--border);
    border-right: 1px solid var(--border);
  }
  
  .filters-bar {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1.5rem 2rem;
    flex-direction: row;
    gap: 1.5rem;
    border-left: 1px solid var(--border);
    border-right: 1px solid var(--border);
  }
  
  /* Desktop Table View */
  .results-list {
    max-width: 1400px;
    margin: 0 auto;
    background: var(--paper);
    border-left: 1px solid var(--border);
    border-right: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    padding-bottom: 0;
  }
  
  .table-header {
    display: none;
    grid-template-columns: 80px 200px 2.5fr 1.5fr 110px 90px;
    gap: 1.5rem;
    padding: 0.875rem 2rem;
    border-bottom: 1px solid var(--border);
    background: var(--subtle-bg);
  }
  
  .table-header.show {
    display: grid !important;
  }
  
  .table-header-cell {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--light-ink);
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    transition: color 0.2s ease;
  }
  
  .table-header-cell:hover {
    color: var(--ink);
  }
  
  .table-header-cell.active {
    color: var(--ink);
  }
  
  .sort-icon {
    font-size: 0.625rem;
    opacity: 0.3;
    transition: opacity 0.2s ease;
  }
  
  .table-header-cell.active .sort-icon {
    opacity: 1;
  }
  
  .result-card {
    display: grid;
    grid-template-columns: 80px 200px 2.5fr 1.5fr 110px 90px;
    gap: 1.5rem;
    align-items: center;
    padding: 1.25rem 2rem;
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    transition: background 0.15s ease;
  }
  
  .result-card:hover {
    background: var(--hover-bg);
  }
  
  .result-card:last-child {
    border-bottom: none;
  }
  
  /* Column 1: Priority + Days */
  .card-header {
    grid-column: 1;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: flex-start;
  }
  
  .priority-badge {
    padding: 0.25rem 0.5rem;
    font-size: 0.625rem;
  }
  
  .card-days {
    display: block;
    font-size: 0.8125rem;
    font-weight: 500;
    white-space: nowrap;
  }
  
  /* Column 2: Vendor */
  .vendor-info {
    grid-column: 2;
    margin: 0;
  }
  
  .vendor-avatar {
    display: none;
  }
  
  .vendor-name {
    font-size: 0.875rem;
  }
  
  /* Column 3: Description */
  .description-text {
    grid-column: 3;
    margin: 0;
    font-size: 0.8125rem;
  }
  
  /* Column 4: Agency */
  .agency-name {
    grid-column: 4;
    margin: 0;
    font-size: 0.8125rem;
  }
  
  /* Column 5: Value */
  .contract-value {
    grid-column: 5;
    text-align: right;
    font-size: 1rem;
  }
  
  /* Column 6: View Link */
  .view-link {
    grid-column: 6;
    justify-content: center;
    text-align: center;
    font-size: 0.6875rem;
    border: 1px solid var(--border);
    border-radius: 0;
    padding: 0.5rem 0.75rem;
    text-decoration: none;
    border-bottom-width: 1px;
    display: inline-flex;
    align-items: center;
    gap: 0;
    width: fit-content;
    margin: 0 auto;
  }
  
  .view-link i {
    display: none;
  }
  
  .view-link:hover {
    background: var(--ink);
    color: var(--paper);
    border-color: var(--ink);
  }
  
  /* Hide mobile elements */
  .days-info,
  .card-header .contract-value {
    display: none;
  }
  
  .bottom-actions {
    display: none;
  }
}

/* Tablet */
@media (min-width: 768px) and (max-width: 1023px) {
  .results-header {
    padding: 1.5rem 2rem;
  }
  
  .header-brand-text {
    font-size: 1.375rem;
  }
  
  .summary-bar {
    padding: 1.5rem 2rem;
  }
  
  .filters-bar {
    padding: 1.5rem 2rem;
    flex-direction: row;
  }
  
  .result-card {
    padding: 1.5rem 2rem;
  }
}

.hidden {
  display: none !important;
}
</style>
</head>
<body>

<!-- Hero Section -->
<section id="heroSection" class="hero-section">
  <h1 id="heroLogo" class="hero-logo-text">Govhoo?</h1>
  <p class="hero-subtitle">Search Expiring Federal Contracts</p>
  
  <div class="search-container">
    <input 
      type="text" 
      id="searchKeywords" 
      class="form-input" 
      placeholder="Try your company, competitor, or agency"
      autocomplete="off"
      autocapitalize="off"
      autocorrect="off"
    >
    <button id="executeSearch" class="search-btn">
      Search
    </button>
  </div>
</section>

<!-- Footer (Hero) -->
<footer class="footer" id="heroFooter">
  <div class="footer-grid">
    
    
    <!-- How to Use -->
    <div class="footer-section">
      <h3 class="footer-heading">How to Use</h3>
      <p class="footer-text">Run a quick search and turn data into action:</p>
      <ul class="footer-list">
        <li>Enter keywords, company names, or technologies</li>
        <li>Filter by contract value or agency</li>
        <li>Review expiration dates and priorities</li>
        <li>Export results to CSV and share with your team</li>
      </ul>
    </div>
    
    <!-- Who It's For -->
    <div class="footer-section">
      <h3 class="footer-heading">Who It's For</h3>
      <p class="footer-text">
        Sales teams, business development professionals, and capture managers who need actionable intelligence on federal contract renewals and competitive opportunities.
      </p>
      <ul class="footer-list">
        <li><span class="footer-emphasis">Defend:</span> Protect your renewal base</li>
        <li><span class="footer-emphasis">Attack:</span> Target competitor contracts</li>
        <li><span class="footer-emphasis">Expand:</span> Find new agency white space</li>
      </ul>
    </div>
	
	<!-- About -->
    <div class="footer-section">
      <h3 class="footer-heading">About Govhoo</h3>
      <p class="footer-text">
        Hi, I'm Mark. I built my sales career at AWS, F5, and Red Hat and before that, I was a DISA COTR and Marine. Along the way I learned the biggest wins often hide in your competitor's expiring contracts and renewal cycles, not RFP chases.
      </p>
      <p class="footer-text">
        That's why I created <strong>Govhoo.</strong> It surfaces expiring and expired federal contracts, showing you contract IDs, values, and timelines so you can:
      </p>
      <p class="footer-text">
        <strong class="footer-emphasis">Defend</strong> your renewals<br>
        <strong class="footer-emphasis">Attack</strong> competitor strongholds<br>
        <strong class="footer-emphasis">Expand</strong> into new territories
      </p>
      <p class="footer-cta">
        Need help? Schedule a free chat or DM me on LinkedIn.
      </p>
      <div class="footer-links">
        <a href="mailto:hello@govhoo.com" class="footer-link" target="_blank">Connect</a>
        <a href="mailto:hello@govhoo.com" class="footer-link">Chat</a>
      </div>
    </div>
  </div>
  
  <div class="footer-bottom">
    © 2025 Govhoo. Data sourced from USASpending.gov
  </div>
</footer>

<!-- Results Section -->
<section id="resultsSection" class="results-section">
  <!-- Header -->
  <div class="results-header">
    <div class="header-brand">
      <h2 id="headerBrand" class="header-brand-text">Govhoo?</h2>
      <div class="header-actions-desktop">
        <button id="exportCSVDesktop" class="action-btn-desktop">
          <i class="fas fa-download"></i>
          Export
        </button>
        <button id="shareSearchDesktop" class="action-btn-desktop">
          <i class="fas fa-share-alt"></i>
          Share
        </button>
      </div>
    </div>
    
    <div class="header-search-row">
      <input 
        type="text" 
        id="headerSearchKeywords" 
        class="header-search-input" 
        placeholder="Search company, competitor, or agency"
        autocomplete="off"
        autocapitalize="off"
        autocorrect="off"
      >
      <button id="headerSearchBtn" class="header-search-btn">
        Search
      </button>
    </div>
  </div>
  
  <!-- Summary -->
  <div class="summary-bar">
    <div id="searchResultsSummary" class="summary-text"></div>
  </div>
  
  <!-- Filters -->
  <div class="filters-bar">
    <input 
      type="text" 
      id="searchFilter" 
      class="filter-input" 
      placeholder="Filter results..."
    >
    <select id="priorityFilter" class="filter-select">
      <option value="">All Priorities</option>
      <option value="urgent">Urgent</option>
      <option value="high">High</option>
      <option value="medium">Medium</option>
      <option value="low">Low</option>
      <option value="expired">Expired</option>
    </select>
  </div>
  
  <!-- Results List -->
  <div id="resultsList" class="results-list">
    <div class="table-header" id="tableHeader">
      <div class="table-header-cell" data-sort="priority">
        Priority
        <i class="fas fa-sort sort-icon"></i>
      </div>
      <div class="table-header-cell" data-sort="vendor">
        Vendor
        <i class="fas fa-sort sort-icon"></i>
      </div>
      <div class="table-header-cell" data-sort="description">
        Description
        <i class="fas fa-sort sort-icon"></i>
      </div>
      <div class="table-header-cell" data-sort="agency">
        Agency
        <i class="fas fa-sort sort-icon"></i>
      </div>
      <div class="table-header-cell" data-sort="value">
        Value
        <i class="fas fa-sort sort-icon"></i>
      </div>
      <div class="table-header-cell">
        Action
      </div>
    </div>
  </div>
  
  <!-- Bottom Actions -->
  <div class="bottom-actions">
    <button id="exportCSV" class="action-btn">
      <i class="fas fa-download"></i>
      Export
    </button>
    <button id="shareSearch" class="action-btn">
      <i class="fas fa-share-alt"></i>
      Share
    </button>
  </div>
</section>

<!-- Loading -->
<div id="loadingState" class="loading-state">
  <div class="loading-spinner"></div>
  <div class="loading-text">Searching</div>
  <div class="loading-subtext">Finding expiring contracts</div>
</div>

<!-- Theme Toggle -->
<button id="themeToggle" class="theme-toggle" title="Toggle theme">
  <i class="fas fa-moon"></i>
</button>

<!-- Footer -->
<footer class="footer" id="resultsFooter">
  <div class="footer-grid">
    
    
    <!-- How to Use -->
    <div class="footer-section">
      <h3 class="footer-heading">How to Use</h3>
      <p class="footer-text">Run a quick search and turn data into action:</p>
      <ul class="footer-list">
        <li>Enter keywords, company names, or technologies</li>
        <li>Filter by contract value or agency</li>
        <li>Review expiration dates and priorities</li>
        <li>Export results to CSV and share with your team</li>
      </ul>
    </div>
    
    <!-- Who It's For -->
    <div class="footer-section">
      <h3 class="footer-heading">Who It's For</h3>
      <p class="footer-text">
        Sales teams, business development professionals, and capture managers who need actionable intelligence on federal contract renewals and competitive opportunities.
      </p>
      <ul class="footer-list">
        <li><span class="footer-emphasis">Defend:</span> Protect your renewal base</li>
        <li><span class="footer-emphasis">Attack:</span> Target competitor contracts</li>
        <li><span class="footer-emphasis">Expand:</span> Find new agency white space</li>
      </ul>
    </div>
	<!-- About -->
    <div class="footer-section">
      <h3 class="footer-heading">About Govhoo</h3>
      <p class="footer-text">
        Hi, I'm Mark. I built my sales career at AWS, F5, and Red Hat and before that, I was a DISA COTR and Marine. Along the way I learned the biggest wins often hide in your competitor's expiring contracts and renewal cycles, not RFP chases.
      </p>
      <p class="footer-text">
        That's why I created <strong>Govhoo.</strong> It surfaces expiring and expired federal contracts, showing you contract IDs, values, and timelines so you can:
      </p>
      <p class="footer-text">
        <strong class="footer-emphasis">Defend</strong> your renewals<br>
        <strong class="footer-emphasis">Attack</strong> competitor strongholds<br>
        <strong class="footer-emphasis">Expand</strong> into new territories
      </p>
      <p class="footer-cta">
        Need help? Schedule a free chat or DM me on LinkedIn.
      </p>
      <div class="footer-links">
        <a href="mailto:hello@govhoo.com" class="footer-link" target="_blank">Connect</a>
        <a href="mailto:hello@govhoo.com" class="footer-link">Chat</a>
      </div>
    </div>
  </div>
  
  <div class="footer-bottom">
    © 2025 Govhoo. Data sourced from USASpending.gov
  </div>
</footer>

<script>
// ===== STATE =====
const AppState = {
  opportunities: [],
  filteredOpportunities: [],
  currentKeywords: '',
  currentSort: { field: 'priority', direction: 'asc' }
};

// ===== UTILS =====
const Utils = {
  formatMoney(value) {
    if (!value) return '$0';
    const abs = Math.abs(value);
    if (abs >= 1e9) return `$${(value / 1e9).toFixed(1)}B`;
    if (abs >= 1e6) return `$${(value / 1e6).toFixed(1)}M`;
    if (abs >= 1e3) return `$${(value / 1e3).toFixed(1)}K`;
    return `$${value.toLocaleString()}`;
  },
  
  formatDate(dateString) {
    if (!dateString) return 'N/A';
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
  },
  
  getDaysUntilDate(dateString) {
    if (!dateString) return null;
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return null;
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    return Math.ceil((date.getTime() - today.getTime()) / 86400000);
  },
  
  getPriority(daysRemaining) {
    if (daysRemaining === null) return { level: 'low', label: 'LOW' };
    if (daysRemaining < 0) return { level: 'expired', label: 'EXPIRED' };
    if (daysRemaining <= 30) return { level: 'urgent', label: 'URGENT' };
    if (daysRemaining <= 90) return { level: 'high', label: 'HIGH' };
    if (daysRemaining <= 180) return { level: 'medium', label: 'MEDIUM' };
    return { level: 'low', label: 'LOW' };
  },
  
  truncate(text, length) {
    if (!text || text.length <= length) return text || '';
    return text.substring(0, length) + '...';
  },
  
  escape(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }
};

// ===== API =====
const API = {
  async searchContracts(keywords) {
    const isComparison = keywords.includes(' vs ') || keywords.includes(',');
    
    if (isComparison) {
      return await this.searchComparison(keywords);
    }
    
    return await this.searchSingle(keywords);
  },
  
  async searchComparison(keywords) {
    let terms = [];
    if (keywords.includes(' vs ')) {
      terms = keywords.split(' vs ').map(t => t.trim());
    } else {
      terms = keywords.split(',').map(t => t.trim());
    }
    
    terms = terms.filter(t => t.length > 0);
    
    if (terms.length < 2) {
      return await this.searchSingle(keywords);
    }
    
    const allResults = [];
    for (const term of terms) {
      try {
        const results = await this.searchSingle(term);
        results.forEach(r => r.searchTerm = term);
        allResults.push(...results);
      } catch (error) {
        console.error(`Failed to search for ${term}:`, error);
      }
    }
    
    if (allResults.length === 0) {
      throw new Error('No contracts found for any search terms');
    }
    
    return allResults;
  },
  
  async searchSingle(keywords) {
    const apiUrl = 'https://api.usaspending.gov/api/v2/search/spending_by_award/';
    
    const requestBody = {
      filters: {
        keywords: [keywords],
        award_type_codes: ['A', 'B', 'C', 'D']
      },
      fields: [
        'Award ID',
        'Recipient Name',
        'Start Date',
        'End Date',
        'Award Amount',
        'Awarding Agency',
        'Awarding Sub Agency',
        'Description',
        'generated_internal_id'
      ],
      page: 1,
      limit: 100,
      sort: 'Award Amount',
      order: 'desc'
    };
    
    const response = await fetch(apiUrl, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(requestBody)
    });
    
    if (!response.ok) {
      throw new Error(`API Error: ${response.status}`);
    }
    
    const data = await response.json();
    return this.transformData(data);
  },
  
  transformData(apiData) {
    if (!apiData.results || !Array.isArray(apiData.results)) {
      throw new Error('Invalid API response');
    }
    
    const opportunities = apiData.results
      .map(record => {
        const endDate = record["End Date"];
        if (!endDate) return null;
        
        const daysRemaining = Utils.getDaysUntilDate(endDate);
        if (daysRemaining === null || daysRemaining < -60 || daysRemaining > 730) return null;
        
        return {
          id: record["Award ID"] || 'Unknown',
          internalId: record["generated_internal_id"],
          vendor: record["Recipient Name"] || 'Unknown Vendor',
          agency: record["Awarding Agency"] || 'Unknown Agency',
          office: record["Awarding Sub Agency"] || '',
          value: parseFloat(record["Award Amount"]) || 0,
          description: record["Description"] || 'No description',
          endDate: endDate,
          daysRemaining: daysRemaining,
          priority: Utils.getPriority(daysRemaining)
        };
      })
      .filter(Boolean);
    
    if (opportunities.length === 0) {
      throw new Error('No contracts found with upcoming renewal dates');
    }
    
    const seen = new Set();
    return opportunities.filter(opp => {
      if (seen.has(opp.id)) return false;
      seen.add(opp.id);
      return true;
    });
  }
};

// ===== UI =====
const UI = {
  showLoading(show) {
    document.getElementById('loadingState').classList.toggle('active', show);
  },
  
  showResults() {
    document.getElementById('heroSection').classList.add('hidden');
    document.getElementById('resultsSection').classList.add('active');
    document.getElementById('heroFooter').style.display = 'none';
    document.getElementById('resultsFooter').style.display = 'block';
  },
  
  showHero() {
    document.getElementById('heroSection').classList.remove('hidden');
    document.getElementById('resultsSection').classList.remove('active');
    document.getElementById('heroFooter').style.display = 'block';
    document.getElementById('resultsFooter').style.display = 'none';
  },
  
  updateSummary() {
    const total = AppState.filteredOpportunities.length;
    const totalValue = AppState.filteredOpportunities.reduce((sum, o) => sum + o.value, 0);
    
    const searchTerms = [...new Set(AppState.opportunities.map(o => o.searchTerm).filter(Boolean))];
    let summary;
    
    if (searchTerms.length > 1) {
      const breakdown = searchTerms.map(term => {
        const count = AppState.filteredOpportunities.filter(o => o.searchTerm === term).length;
        return `<strong>${count}</strong> for "${term}"`;
      }).join(', ');
      summary = `Found ${breakdown} (<strong>${total.toLocaleString()}</strong> total) totaling <strong>${Utils.formatMoney(totalValue)}</strong>`;
    } else {
      summary = `Found <strong>${total.toLocaleString()}</strong> expiring contracts for <strong>"${AppState.currentKeywords}"</strong> totaling <strong>${Utils.formatMoney(totalValue)}</strong>`;
    }
    
    document.getElementById('searchResultsSummary').innerHTML = summary;
  },
  
  renderResults() {
    const container = document.getElementById('resultsList');
    const tableHeader = document.getElementById('tableHeader');
    
    // Show table header on desktop
    if (window.innerWidth >= 1024) {
      tableHeader.classList.add('show');
    }
    
    // Clear existing cards but keep header
    const existingCards = container.querySelectorAll('.result-card, .empty-state');
    existingCards.forEach(card => card.remove());
    
    if (AppState.filteredOpportunities.length === 0) {
      const emptyState = document.createElement('div');
      emptyState.className = 'empty-state';
      emptyState.innerHTML = `
        <div class="empty-icon"><i class="fas fa-filter"></i></div>
        <div class="empty-text">No contracts match your filters</div>
      `;
      container.appendChild(emptyState);
      return;
    }
    
    const fragment = document.createDocumentFragment();
    
    AppState.filteredOpportunities.forEach(opp => {
      let daysDisplay;
      
      if (opp.daysRemaining < 0) {
        const daysAgo = Math.abs(opp.daysRemaining);
        daysDisplay = `${daysAgo}d ago`;
      } else {
        daysDisplay = `${opp.daysRemaining}d`;
      }
      
      const card = document.createElement('div');
      card.className = 'result-card';
      card.onclick = () => window.open(`https://www.usaspending.gov/award/${opp.internalId}`, '_blank');
      card.innerHTML = `
        <div class="card-header">
          <span class="priority-badge priority-${opp.priority.level}">
            ${opp.priority.label}
          </span>
          <div class="card-days days-${opp.priority.level}">${daysDisplay}</div>
        </div>
        
        <div class="vendor-info">
          <div class="vendor-name">${Utils.escape(Utils.truncate(opp.vendor, 35))}</div>
        </div>
        
        <div class="description-text">${Utils.escape(Utils.truncate(opp.description, 100))}</div>
        
        <div class="agency-name">${Utils.escape(Utils.truncate(opp.agency, 40))}</div>
        
        <div class="contract-value">${Utils.formatMoney(opp.value)}</div>
        
        <a href="https://www.usaspending.gov/award/${opp.internalId}" 
           target="_blank" 
           class="view-link"
           onclick="event.stopPropagation()">
          View
        </a>
        
        <div class="days-info">
          <div class="days-remaining days-${opp.priority.level}">${opp.daysRemaining < 0 ? `${Math.abs(opp.daysRemaining)} day${Math.abs(opp.daysRemaining) === 1 ? '' : 's'} ago` : `${opp.daysRemaining} day${opp.daysRemaining === 1 ? '' : 's'}`}</div>
          <div class="expiry-date">• ${opp.daysRemaining < 0 ? `Expired ${Utils.formatDate(opp.endDate)}` : `Expires ${Utils.formatDate(opp.endDate)}`}</div>
        </div>
      `;
      
      fragment.appendChild(card);
    });
    
    container.appendChild(fragment);
  }
};

// ===== SEARCH =====
async function performSearch(keywords, btn) {
  if (!keywords) {
    return;
  }
  
  AppState.currentKeywords = keywords;
  
  const originalText = btn.innerHTML;
  btn.disabled = true;
  btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
  
  UI.showLoading(true);
  
  try {
    const results = await API.searchContracts(keywords);
    
    AppState.opportunities = results;
    AppState.filteredOpportunities = [...results].sort((a, b) => {
      const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3, expired: 4 };
      return priorityOrder[a.priority.level] - priorityOrder[b.priority.level];
    });
    
    UI.updateSummary();
    UI.renderResults();
    UI.showResults();
    
    document.getElementById('headerSearchKeywords').value = keywords;
    
    const params = new URLSearchParams({ q: keywords });
    window.history.replaceState({}, '', `?${params.toString()}`);
    
  } catch (error) {
    console.error('Search error:', error);
    alert(error.message || 'Search failed. Please try again.');
  } finally {
    UI.showLoading(false);
    btn.disabled = false;
    btn.innerHTML = originalText;
  }
}

// ===== FILTERING =====
function applyFilters() {
  const searchTerm = document.getElementById('searchFilter').value.toLowerCase();
  const priority = document.getElementById('priorityFilter').value;
  
  AppState.filteredOpportunities = AppState.opportunities.filter(opp => {
    if (searchTerm) {
      const matches = 
        opp.vendor.toLowerCase().includes(searchTerm) ||
        opp.agency.toLowerCase().includes(searchTerm) ||
        opp.description.toLowerCase().includes(searchTerm) ||
        opp.id.toLowerCase().includes(searchTerm);
      if (!matches) return false;
    }
    
    if (priority && opp.priority.level !== priority) return false;
    
    return true;
  });
  
  sortOpportunities(AppState.currentSort.field, AppState.currentSort.direction);
  UI.updateSummary();
  UI.renderResults();
}

// ===== SORTING =====
function sortOpportunities(field, direction) {
  AppState.filteredOpportunities.sort((a, b) => {
    let valA, valB;
    
    switch(field) {
      case 'priority':
        const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3, expired: 4 };
        valA = priorityOrder[a.priority.level];
        valB = priorityOrder[b.priority.level];
        break;
      case 'vendor':
        valA = a.vendor.toLowerCase();
        valB = b.vendor.toLowerCase();
        break;
      case 'value':
        valA = a.value;
        valB = b.value;
        break;
      case 'agency':
        valA = a.agency.toLowerCase();
        valB = b.agency.toLowerCase();
        break;
      case 'description':
        valA = a.description.toLowerCase();
        valB = b.description.toLowerCase();
        break;
      default:
        return 0;
    }
    
    if (valA < valB) return direction === 'asc' ? -1 : 1;
    if (valA > valB) return direction === 'asc' ? 1 : -1;
    return 0;
  });
  
  AppState.currentSort = { field, direction };
  updateSortIcons(field, direction);
}

function updateSortIcons(field, direction) {
  const headers = document.querySelectorAll('.table-header-cell');
  headers.forEach(header => {
    const sortField = header.dataset.sort;
    const icon = header.querySelector('.sort-icon');
    
    if (!sortField || !icon) return;
    
    if (sortField === field) {
      header.classList.add('active');
      icon.className = `fas fa-sort-${direction === 'asc' ? 'up' : 'down'} sort-icon`;
    } else {
      header.classList.remove('active');
      icon.className = 'fas fa-sort sort-icon';
    }
  });
}

// ===== EXPORT =====
function exportToCSV() {
  if (AppState.filteredOpportunities.length === 0) {
    return;
  }
  
  const headers = ['Priority', 'Days Left', 'Vendor', 'Agency', 'Value', 'Expires', 'Description'];
  const rows = AppState.filteredOpportunities.map(o => [
    o.priority.label,
    o.daysRemaining,
    o.vendor,
    o.agency,
    o.value,
    o.endDate,
    o.description
  ]);
  
  let csv = headers.join(',') + '\n';
  rows.forEach(row => {
    csv += row.map(cell => `"${String(cell).replace(/"/g, '""')}"`).join(',') + '\n';
  });
  
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `govhoo-${AppState.currentKeywords}-${new Date().toISOString().split('T')[0]}.csv`;
  a.click();
  URL.revokeObjectURL(url);
}

// ===== SHARE =====
function shareSearch() {
  if (navigator.share) {
    navigator.share({
      title: 'Govhoo Search',
      text: `Expiring contracts for "${AppState.currentKeywords}"`,
      url: window.location.href
    }).catch(() => {
      copyToClipboard();
    });
  } else {
    copyToClipboard();
  }
}

function copyToClipboard() {
  navigator.clipboard.writeText(window.location.href);
}

// ===== RESET =====
function resetToHero() {
  document.getElementById('searchKeywords').value = '';
  document.getElementById('headerSearchKeywords').value = '';
  document.getElementById('searchFilter').value = '';
  document.getElementById('priorityFilter').value = '';
  AppState.opportunities = [];
  AppState.filteredOpportunities = [];
  UI.showHero();
  window.history.replaceState({}, '', window.location.pathname);
}

// ===== THEME TOGGLE =====
function initTheme() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
  updateThemeIcon(savedTheme);
  
  // Set initial meta theme color
  const metaThemeColor = document.querySelector('meta[name="theme-color"]');
  metaThemeColor.setAttribute('content', savedTheme === 'light' ? '#ffffff' : '#1a1a1a');
}

function initFooters() {
  // Initially hide results footer, show hero footer
  document.getElementById('resultsFooter').style.display = 'none';
  document.getElementById('heroFooter').style.display = 'block';
}

function toggleTheme() {
  const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  updateThemeIcon(newTheme);
  
  // Update meta theme color
  const metaThemeColor = document.querySelector('meta[name="theme-color"]');
  metaThemeColor.setAttribute('content', newTheme === 'light' ? '#ffffff' : '#1a1a1a');
}

function updateThemeIcon(theme) {
  const icon = document.querySelector('#themeToggle i');
  icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
}

// ===== INIT =====
document.addEventListener('DOMContentLoaded', () => {
  // Initialize theme
  initTheme();
  
  // Initialize footer visibility
  initFooters();
  
  // Theme toggle
  document.getElementById('themeToggle').addEventListener('click', toggleTheme);
  
  const heroInput = document.getElementById('searchKeywords');
  const heroBtn = document.getElementById('executeSearch');
  
  heroBtn.addEventListener('click', () => performSearch(heroInput.value.trim(), heroBtn));
  heroInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') performSearch(heroInput.value.trim(), heroBtn);
  });
  
  const headerInput = document.getElementById('headerSearchKeywords');
  const headerBtn = document.getElementById('headerSearchBtn');
  
  headerBtn.addEventListener('click', () => performSearch(headerInput.value.trim(), headerBtn));
  headerInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') performSearch(headerInput.value.trim(), headerBtn);
  });
  
  document.getElementById('searchFilter').addEventListener('input', applyFilters);
  document.getElementById('priorityFilter').addEventListener('change', applyFilters);
  
  // Column sorting
  document.querySelectorAll('.table-header-cell[data-sort]').forEach(header => {
    header.addEventListener('click', () => {
      const field = header.dataset.sort;
      const currentDirection = AppState.currentSort.field === field ? AppState.currentSort.direction : 'asc';
      const newDirection = currentDirection === 'asc' ? 'desc' : 'asc';
      sortOpportunities(field, newDirection);
      UI.renderResults();
    });
  });
  
  document.getElementById('exportCSV').addEventListener('click', exportToCSV);
  document.getElementById('shareSearch').addEventListener('click', shareSearch);
  
  document.getElementById('exportCSVDesktop').addEventListener('click', exportToCSV);
  document.getElementById('shareSearchDesktop').addEventListener('click', shareSearch);
  
  document.getElementById('heroLogo').addEventListener('click', resetToHero);
  document.getElementById('headerBrand').addEventListener('click', resetToHero);
  
  if (window.innerWidth >= 1024) {
    document.querySelector('.header-actions-desktop').style.display = 'flex';
  }
  
  window.addEventListener('resize', () => {
    const tableHeader = document.getElementById('tableHeader');
    
    if (window.innerWidth >= 1024) {
      document.querySelector('.header-actions-desktop').style.display = 'flex';
      if (AppState.opportunities.length > 0) {
        tableHeader.classList.add('show');
      }
    } else {
      document.querySelector('.header-actions-desktop').style.display = 'none';
      tableHeader.classList.remove('show');
    }
  });
  
  const params = new URLSearchParams(window.location.search);
  const urlKeywords = params.get('q');
  if (urlKeywords) {
    heroInput.value = urlKeywords;
    performSearch(urlKeywords, heroBtn);
  } else {
    heroInput.focus();
  }
});
</script>

</body>
</html>
